<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title data-en="Donate Clothes" data-kn="‡≤¨‡≤ü‡≥ç‡≤ü‡≥Ü ‡≤¶‡≥á‡≤£‡≤ø‡≤ó‡≥Ü ‡≤®‡≥Ä‡≤°‡≤ø">Donate Clothes</title>

  <link rel="stylesheet" href="donate.css" />
  <link rel="stylesheet" href="styles.css" />

  <style>
    .change-lang {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: #f0f0f0;
      border: 1px solid #ccc;
      padding: 0.2rem 0.1rem;
      border-radius: 8px;
      cursor: pointer;
    }
    .language-modal {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background-color: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    .language-popup {
      background: white;
      padding: 2rem;
      border-radius: 12px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }

    .lang-button {
      padding: 0.75rem 1.5rem;
      margin: 0.5rem;
      font-size: 1.1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background-color: #3B82F6;
      color: white;
      transition: background 0.3s;
    }

    .lang-button:hover {
      background-color: #2563EB;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>

  <div class="container">
    <a href="index.html" class="back-home" data-en="‚Üê Back to Home" data-kn="‚Üê ‡≤Æ‡≥Å‡≤ñ‡≥ç‡≤Ø ‡≤™‡≥Å‡≤ü‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤π‡≤ø‡≤Ç‡≤¶‡≤ø‡≤∞‡≥Å‡≤ó‡≤ø">‚Üê Back to Home</a>
    <button class="change-lang" onclick="showLanguageModal()">üåê Change Language</button>

    <h2 data-en="Please fill out the donation form" data-kn="‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤¶‡≥á‡≤£‡≤ø‡≤ó‡≥Ü ‡≤´‡≤æ‡≤∞‡≥ç‡≤Æ‡≥ç ‡≤§‡≥Å‡≤Ç‡≤¨‡≤ø.">Donate Your Clothes</h2>
    <form action="https://formsubmit.co/hdmcwebsiteproject@gmail.com" method="POST" enctype="multipart/form-data">
      <input type="hidden" name="_next" value="https://clothes-donation-202505.netlify.app/thankyou.html" />

      <label for="name" data-en="Your Name" data-kn="‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤π‡≥Ü‡≤∏‡≤∞‡≥Å">Your Name</label>
      <input type="text" id="name" name="name" placeholder="Enter your name" required>

      <label for="address" data-en="Your Address" data-kn="‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤µ‡≤ø‡≤≥‡≤æ‡≤∏">Your Address</label>
      <textarea id="address" name="address" placeholder="Enter your full address" required></textarea>

      <label for="phone" data-en="Phone Number" data-kn="‡≤¶‡≥Ç‡≤∞‡≤µ‡≤æ‡≤£‡≤ø ‡≤∏‡≤Ç‡≤ñ‡≥ç‡≤Ø‡≥Ü">Phone Number</label>
      <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" pattern="[0-9]{10}" title="Please enter a valid 10-digit phone number" required>
      
      <div class="form-group">
        <label for="totalWeight" data-en="Total Weight of Clothes (in kg):" data-kn="‡≤í‡≤ü‡≥ç‡≤ü‡≥Å ‡≤¨‡≤ü‡≥ç‡≤ü‡≥Ü‡≤ó‡≤≥ ‡≤§‡≥Ç‡≤ï (‡≤ï‡≥Ü‡≤ú‡≤ø):">Total Weight of Clothes (in kg):</label>
        <input type="number" id="totalWeight" name="totalWeight" min="1" required>
      </div>

      <div class="form-group">
        <label data-en="Clothing Types:" data-kn="‡≤¨‡≤ü‡≥ç‡≤ü‡≥Ü‡≤ó‡≤≥ ‡≤™‡≥ç‡≤∞‡≤ï‡≤æ‡≤∞‡≤ó‡≤≥‡≥Å:">Clothing Types:</label>

        <label for="childrenClothes" data-en="Children:" data-kn="‡≤Æ‡≤ï‡≥ç‡≤ï‡≤≥‡≥Å:">Children:</label>
        <input type="number" id="childrenClothes" name="childrenClothes" min="0">

        <label for="menClothes" data-en="Men:" data-kn="‡≤™‡≥Å‡≤∞‡≥Å‡≤∑‡≤∞‡≥Å:">Men:</label>
        <input type="number" id="menClothes" name="menClothes" min="0">

        <label for="womenClothes" data-en="Women:" data-kn="‡≤π‡≥Ü‡≤£‡≥ç‡≤£‡≥Å‡≤Æ‡≤ï‡≥ç‡≤ï‡≤≥‡≥Å:">Women:</label>
        <input type="number" id="womenClothes" name="womenClothes" min="0">
      </div>

      <label for="image" data-en="Upload Picture of Clothes" data-kn="‡≤¨‡≤ü‡≥ç‡≤ü‡≥Ü‡≤ó‡≤≥ ‡≤ö‡≤ø‡≤§‡≥ç‡≤∞‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤Ö‡≤™‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø">Upload Picture of Clothes</label>
      <input type="file" id="image" name="image" accept="image/*" required>

      <label for="delivery_location" data-en="Select Delivery Location" data-kn="‡≤µ‡≤ø‡≤§‡≤∞‡≤£‡≤æ ‡≤∏‡≥ç‡≤•‡≤≥‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø">Select Delivery Location</label>
      <select id="delivery_location" name="delivery_location" required>
        <option value="" disabled selected>Select a location</option>
        <option value="Location 1">Zone 1: Near Uday Hostel Dharakoti Road, Dharwad</option>
        <option value="Location 2">Zone 2: Tippu Sultan Circle, Mankilla Main Road, Dharwad</option>
        <option value="Location 3">Zone 3: Near Jubilee Circle, Beside Kalabhavan, Dharwad</option>
        <option value="Location 4">Zone 4: Near police station, Navnagar, Hubli</option>
        <option value="Location 5">Zone 5: Old Income tax road, Vidyanagar, Hubli</option>
        <option value="Location 6">Zone 6: Old Badami Nagar,Kusugal Road, Keshwapur, Hubli</option>
        <option value="Location 7">Zone 7: Akshay Park, Gokul Road, Hubli</option>
        <option value="Location 8">Zone 8: Navanagar Building, J.c.Nagar, Hubli</option>
        <option value="Location 9">Zone 9: Ayodhya Nagar, Old Hubli, Hubli</option>
        <option value="Location 10">Zone 10: Old Hubli market building, old Hubli</option>
        <option value="Location 11">Zone 11: Behind New English School, P.B.Road, Hubli</option>
        <option value="Location 12">Zone 12: kalabhavan near Jubilee circle, Dharwad</option>
      </select>
      <p style="margin-top: 0.5rem; font-size: 0.95rem; color: #181818;" 
        data-en="Kindly deliver your clothes to the location you have selected above." 
        data-kn="‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤®‡≥Ä‡≤µ‡≥Å ‡≤Æ‡≥á‡≤≤‡≥ç‡≤®‡≥ã‡≤ü‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø‡≤¶ ‡≤∏‡≥ç‡≤•‡≤≥‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≤ü‡≥ç‡≤ü‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤í‡≤¶‡≤ó‡≤ø‡≤∏‡≤ø.">
        Kindly deliver your clothes to the location you have selected above.
      </p>
      <button type="submit" data-en="Submit" data-kn="‡≤∏‡≤≤‡≥ç‡≤≤‡≤ø‡≤∏‡≥Å">Submit</button>
    </form>
  </div>

  <!-- Language Modal -->
  <div class="language-modal hidden" id="languageModal">
    <div class="language-popup">
      <h2>Select Language / ‡≤≠‡≤æ‡≤∑‡≥Ü ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø</h2>
      <button class="lang-button" onclick="setLanguage('en')">English</button>
      <button class="lang-button" onclick="setLanguage('kn')">‡≤ï‡≤®‡≥ç‡≤®‡≤°</button>
    </div>
  </div>

  <!-- Script -->
  <script>
    function getQueryParam(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

    function applyLanguage(lang) {
      document.querySelectorAll('[data-en]').forEach(el => {
        el.textContent = el.getAttribute(`data-${lang}`);
      });
    }

    function setLanguage(lang) {
      const currentUrl = window.location.pathname;
      window.location.href = `${currentUrl}?lang=${lang}`;
    }

    function showLanguageModal() {
      document.getElementById('languageModal').classList.remove('hidden');
    }

    document.addEventListener('DOMContentLoaded', () => {
      const lang = getQueryParam('lang') || 'en';
      applyLanguage(lang);
    });
  </script>
  <script src="static/suggest-location.js"></script>
  <!-- Info Button -->
<div style="text-align:center; margin-top: 1rem;">
  <button class="info-button" onclick="showPopup()">‚ÑπÔ∏è How to Circulate Clothes</button>
</div>

<script src="suggest-location.js"></script>

<!-- Popup Modal -->
<!-- Auto-Show Popup Modal -->
<div class="popup-modal" id="popupModal">
  <div class="popup-content">
    <h3>How to Circulate Donated Clothes</h3>
    <ul>
      <li>Make sure all clothes are clean, dry, and fresh. No stains, smells, or damp items.</li>
      <li>Group your clothes into: 1.Men‚Äôs Clothing 2.Women‚Äôs Clothing 3.Children‚Äôs Clothing 4.Winter Wear (jackets, sweaters, etc.)Blankets and 5.Warm Accessories (scarves, gloves, socks, etc.)</li>
      <li>Please do not donate ripped, stained, or unusable clothes. We want the clothes to bring dignity and warmth to someone in need..</li>
      <li>Fold and pack clothes in a clean bag or box. Label the outside with the category if possible (e.g., ‚ÄúWomen‚Äôs Winter Wear‚Äù).</li>
      <li>If you're donating shoes, make sure they‚Äôre in good condition and paired¬†properly.</li>
    </ul>
    <button class="understand-button" onclick="hidePopup()">I Understand</button>
  </div>
</div>

<script>
  // Auto-detect and suggest nearest center
  function detectNearestLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(position => {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;

        fetch("http://localhost:8080/live-location", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ latitude: lat, longitude: lon })
        })
        .then(res => res.text())
        .then(nearest => {
          document.getElementById("auto_location").value = nearest;

          // Auto-select the nearest in dropdown if matching
          const select = document.getElementById("delivery_location");
          for (let option of select.options) {
            if (option.text.includes(nearest)) {
              option.selected = true;
              break;
            }
          }
        })
        .catch(() => {
          document.getElementById("auto_location").value = "Unable to determine.";
        });
      }, () => {
        document.getElementById("auto_location").value = "Permission denied for location.";
      });
    } else {
      document.getElementById("auto_location").value = "Geolocation not supported.";
    }
  }

  document.addEventListener("DOMContentLoaded", () => {
    detectNearestLocation();
  });
</script>
<script>
  // Simulated total clothes collected
  let collectedCount = 1350; // This would be dynamic if connected to a backend
  let target = 2000;

  function updateProgressBar() {
    const percent = Math.min((collectedCount / target) * 100, 100);
    document.getElementById("progressFill").style.width = percent + "%";
    document.getElementById("progressText").textContent = `Clothes Collected: ${collectedCount}/${target}`;
  }

  window.onload = updateProgressBar;
</script>
</body>
</html>